<script setup lang="ts">
// Store
import * as CryptoJS from "crypto-js";
import uuid4 from "uuid4";
import { useExplorePageStore } from "~/store/useExplorePageStore";
import { environment } from "~/services/environments";
import { useAdsStore } from "~/store/useAdsStore";
const exploreUseAdsStore = useAdsStore();
const explorePageStore = useExplorePageStore();
// Variable
const isRenderFinish = ref<boolean>(false);
const route = useRoute();
const queryGenre = route.query.genre;

// SSR CALL API
await useAsyncData(() => explorePageStore.getByStyle(`${queryGenre}`));

const nuxtApp = useNuxtApp();
nuxtApp.hook("page:finish", () => {
  isRenderFinish.value = true;
});
const onClickBtnBetween = () => {
  const uuid = uuid4();
  exploreUseAdsStore.postClick(
    explorePageStore.idAdsBetween,
    CryptoJS.AES.encrypt(uuid, environment.tokenOtt).toString(),
  );
};

const path = environment.urlBaseApp + route.fullPath;
useHead({
  htmlAttrs: { lang: "th" },
  title: " üîçÔ∏é ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏û‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì  üéµ - Ketuber",
  meta: [
    {
      name: "description",
      content:
        "‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏û‡∏•‡∏á‡πÇ‡∏õ‡∏£‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡∏î‡∏∑‡πà‡∏°‡∏î‡πà‡∏≥‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏•‡∏¢‡πå‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ó‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏¥‡∏ñ‡∏µ‡∏û‡∏¥‡∏ñ‡∏±‡∏ô ‡∏™‡∏≥‡∏£‡∏ß‡∏à‡πÅ‡∏ô‡∏ß‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏°‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì",
    },
    {
      name: "keywords",
      content: [
        "ketube , ‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á, karaoke, ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞, ‡πÄ‡∏û‡∏•‡∏á, ‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå, ‡πÄ‡∏û‡∏•‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå, ‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏´‡∏°‡πà, music, ‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏´‡∏°‡πà, ‡∏®‡∏¥‡∏•‡∏õ‡∏¥‡∏ô, artist, ‡∏≠‡∏±‡∏•‡∏ö‡∏±‡πâ‡∏°, album, playlist, ‡πÄ‡∏û‡∏•‡∏¢‡πå‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏°, ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå, ‡∏£‡πâ‡∏≠‡∏á‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞, ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞, ‡πÄ‡∏ß‡πá‡∏ö‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞ ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå, youtube, ‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞‡∏û‡∏Å‡∏û‡∏≤, ‡∏î‡∏ô‡∏ï‡∏£‡∏µ",
      ],
    },
    { name: "robots", content: "index, follow" },

    // facebook
    { property: "og:title", name: "og:title", content: "‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏û‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" },
    {
      property: "og:description",
      name: "og:description",
      content:
        "‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏û‡∏•‡∏á‡πÇ‡∏õ‡∏£‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡∏î‡∏∑‡πà‡∏°‡∏î‡πà‡∏≥‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏•‡∏¢‡πå‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ó‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏¥‡∏ñ‡∏µ‡∏û‡∏¥‡∏ñ‡∏±‡∏ô ‡∏™‡∏≥‡∏£‡∏ß‡∏à‡πÅ‡∏ô‡∏ß‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏°‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì",
    },
    { property: "og:url", name: "og:url", content: path },
    { property: "og:site:name", name: "og:site:name", content: path },
    { property: "og:image", name: "og:image", content: "/favicon.ico" },

    // twitter
    {
      property: "twitter:card",
      name: "twitter:card",
      content: "summary_large_image",
    },
    {
      property: "twitter:title",
      name: "twitter:title",
      content: "‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏û‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",
    },
    { property: "twitter:url", name: "twitter:url", content: path },
    {
      property: "twitter:description",
      name: "twitter:description",
      content:
        "‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏û‡∏•‡∏á‡πÇ‡∏õ‡∏£‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡∏î‡∏∑‡πà‡∏°‡∏î‡πà‡∏≥‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏•‡∏¢‡πå‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ó‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏¥‡∏ñ‡∏µ‡∏û‡∏¥‡∏ñ‡∏±‡∏ô ‡∏™‡∏≥‡∏£‡∏ß‡∏à‡πÅ‡∏ô‡∏ß‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏°‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì",
    },
    {
      property: "twitter:image",
      name: "twitter:image",
      content: "/favicon.ico",
    },
    { property: "twitter:site", name: "twitter:site", content: "@ketube" },
  ],
  link: [{ rel: "canonical", href: path }],
});
</script>

<template>
  <div class="explore-page">
    <CoverInfo
      title="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏û‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà"
      description="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏û‡∏•‡∏á‡πÇ‡∏õ‡∏£‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ‡∏î‡∏∑‡πà‡∏°‡∏î‡πà‡∏≥‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏•‡∏¢‡πå‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ó‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏¥‡∏ñ‡∏µ‡∏û‡∏¥‡∏ñ‡∏±‡∏ô ‡∏™‡∏≥‡∏£‡∏ß‡∏à‡πÅ‡∏ô‡∏ß‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏°‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì"
    />

    <div class="wrapper-content">
      <div class="section-category">
        <div
          v-if="
            explorePageStore.exploreData?.style &&
            explorePageStore.exploreData?.style.length > 0 &&
            isRenderFinish
          "
          class="slider-content"
        >
          <div
            v-for="(item, index) in explorePageStore.exploreData?.style"
            :key="index"
            class="slider-item"
          >
            <a :href="`/explore?genre=${item.slug}`">
              <button class="btn btn-solid-secondary">{{ item.name }}</button>
            </a>
          </div>
        </div>
      </div>

      <SquareCarousel
        v-if="
          explorePageStore.videoNewReleases &&
          explorePageStore.videoNewReleases?.length > 0 &&
          isRenderFinish
        "
        title="‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏´‡∏°‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î"
        :items="explorePageStore.videoNewReleases"
        :show-icon-hover="true"
        :show-partner="true"
      ></SquareCarousel>

      <SquareCarousel
        v-if="
          explorePageStore.recommendedVideos &&
          explorePageStore.recommendedVideos?.length > 0 &&
          isRenderFinish
        "
        :on-click-btn="onClickBtnBetween"
        title="‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥"
        :items="explorePageStore.recommendedVideos"
        :show-icon-hover="true"
        :show-partner="true"
      ></SquareCarousel>

      <SquareCarousel
        v-if="
          explorePageStore.recommendedPlaylists &&
          explorePageStore.recommendedPlaylists?.length > 0 &&
          isRenderFinish
        "
        title="‡πÄ‡∏û‡∏•‡∏¢‡πå‡∏•‡∏¥‡∏™‡∏ï‡πå‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥"
        :items="explorePageStore.recommendedPlaylists"
        :show-text-hover="true"
        :show-text-overlay="true"
        :show-partner="true"
      ></SquareCarousel>

      <CircleCarousel
        v-if="
          explorePageStore.artists &&
          explorePageStore.artists?.length > 0 &&
          isRenderFinish
        "
        title="‡∏®‡∏¥‡∏•‡∏õ‡∏¥‡∏ô‡∏™‡∏∏‡∏î‡∏Æ‡∏¥‡∏ï"
        :items="explorePageStore.artists"
        :show-text-hover="true"
        :show-text-overlay="true"
      ></CircleCarousel>
    </div>
  </div>
</template>

<style src="assets/scss/pages/explore/explore.scss" lang="scss" scoped></style>
